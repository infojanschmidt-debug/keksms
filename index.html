<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OnlyKeks ‚Äì Post, die schmeckt</title>
  <meta name="description" content="Schicke s√º√üe Botschaften mit direkter QR-Antwort. Reply-Keks in 3 Klicks ‚Äì kein Account." />
  <link rel="canonical" href="https://infojanschmidt-debug.github.io/keksms/" />
  <meta name="robots" content="index,follow" />

  <!-- Theme / Social -->
  <meta name="theme-color" content="#ff4fa3" />
  <meta property="og:title" content="OnlyKeks ‚Äì Post, die schmeckt" />
  <meta property="og:description" content="Schicke s√º√üe Botschaften mit direkter QR-Antwort. Reply-Keks in 3 Klicks ‚Äì kein Account." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://infojanschmidt-debug.github.io/keksms/" />
  <meta property="og:image" content="https://infojanschmidt-debug.github.io/keksms/assets/img/og.jpg" />
  <meta name="twitter:card" content="summary_large_image" />

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#ffffff;
      --ink:#0b1b2a;
      --muted:#4b5b6b;
      --line: rgba(11,27,42,.10);

      --sky1:#ffe6f2;
      --sky2:#ffd3ea;
      --sky3:#fff4ea;

      --pink:#ff4fa3;
      --pink2:#ff7cc5;
      --pinkSoft: rgba(255,79,163,.14);
      --pinkSoft2: rgba(255,124,197,.12);

      --cookie:#c98b5f;
      --cookie2:#e6b08a;

      --radius: 22px;
      --shadow: 0 16px 50px rgba(0,0,0,.10);
      --shadowSoft: 0 10px 30px rgba(0,0,0,.08);

      --max: 1100px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: "Nunito", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1200px 600px at 15% 0%, rgba(255,255,255,.75), rgba(255,255,255,0)),
        radial-gradient(900px 500px at 85% 10%, rgba(255,255,255,.60), rgba(255,255,255,0)),
        linear-gradient(180deg, var(--sky1), var(--sky2) 45%, var(--sky3));
      overflow-x:hidden;
    }
    a{ color:inherit; }
    .wrap{ width:min(var(--max), calc(100% - 40px)); margin:0 auto; }

    /* sticky header */
    header{
      position:sticky; top:0; z-index:20;
      backdrop-filter: blur(10px);
      background: rgba(255,255,255,.55);
      border-bottom: 1px solid rgba(255,255,255,.6);
    }
    .top{
      display:flex; align-items:center; justify-content:space-between;
      padding:14px 0;
      gap:12px;
    }
    .brand{ display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.2px; }
    .logo{
      width:42px; height:42px; border-radius:14px;
      background:
        radial-gradient(circle at 35% 30%, #fff, rgba(255,255,255,0) 55%),
        radial-gradient(circle at 65% 70%, rgba(255,255,255,.55), rgba(255,255,255,0) 58%),
        linear-gradient(135deg, var(--cookie2), var(--cookie));
      box-shadow: 0 10px 20px rgba(201,139,95,.25);
      position:relative;
      overflow:hidden;
      transform: translateZ(0);
    }
    .logo:after{
      content:"";
      position:absolute; inset:10px 10px auto auto;
      width:9px; height:9px; border-radius:99px;
      background: rgba(120,60,20,.25);
      box-shadow:
        -18px 8px 0 rgba(120,60,20,.22),
        -10px 18px 0 rgba(120,60,20,.18),
        -26px 22px 0 rgba(120,60,20,.20);
    }
    .brand small{ display:block; font-weight:700; color:var(--muted); margin-top:1px; }

    .nav{ display:flex; align-items:center; gap:14px; color:var(--muted); }
    .nav a{
      text-decoration:none;
      font-weight:700;
      padding:10px 12px;
      border-radius:14px;
      transition:.15s;
    }
    .nav a:hover{ background: rgba(255,255,255,.65); color:var(--ink); }

    .ctaTop{ display:flex; align-items:center; gap:10px; }
    .btn{
      border:0; cursor:pointer;
      font-weight:800;
      padding:12px 16px;
      border-radius:16px;
      background: rgba(255,255,255,.75);
      box-shadow: var(--shadowSoft);
      transition:.15s;
      text-decoration:none;
      display:inline-flex; align-items:center; justify-content:center;
      gap:10px;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); }
    .btnPrimary{
      color:#fff;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      box-shadow: 0 16px 30px rgba(255,79,163,.30);
    }
    .pill{
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(255,255,255,.8);
      color: var(--muted);
      font-weight:800;
    }

    /* hero */
    .hero{ padding: 28px 0 14px; position:relative; }
    .heroGrid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:22px;
      align-items:stretch;
    }
    .card{
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(255,255,255,.85);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .heroText{ padding:22px; position:relative; overflow:hidden; }
    h1{
      margin:0 0 10px;
      font-size: clamp(30px, 3.2vw, 44px);
      line-height:1.05;
      letter-spacing:-.5px;
    }
    .sub{
      margin:0 0 14px;
      color: var(--muted);
      font-size: 16px;
      line-height:1.45;
      font-weight:700;
      max-width: 44ch;
    }

    .chipRow{ display:flex; flex-wrap:wrap; gap:10px; margin:14px 0 14px; }
    .chip{
      border: 1px solid rgba(255,79,163,.20);
      background: rgba(255,79,163,.10);
      color: #7a2a54;
      border-radius: 999px;
      padding: 10px 12px;
      font-weight:800;
      cursor:pointer;
      transition:.15s;
      user-select:none;
    }
    .chip:hover{ transform: translateY(-1px); background: rgba(255,79,163,.14); }

    .heroActions{
      display:flex; gap:12px; align-items:center; flex-wrap:wrap;
      margin-top: 10px;
    }

    /* Trust bar */
    .trustBar{
      margin: 14px 0 0;
      padding: 12px 14px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      align-items:center;
      border-radius: 18px;
      background: rgba(255,255,255,.62);
      border: 1px solid rgba(255,255,255,.8);
    }
    .trustItem{
      display:flex; gap:10px; align-items:center;
      font-weight:800;
      color: var(--muted);
      font-size: 13px;
      min-height: 40px;
    }
    .ico{
      width:36px; height:36px; border-radius: 14px;
      background: rgba(255,79,163,.12);
      border: 1px solid rgba(255,79,163,.18);
      display:flex; align-items:center; justify-content:center;
      flex:0 0 auto;
    }
    .ico svg{ width:18px; height:18px; opacity:.85; }

    /* hero media */
    .heroMedia{ padding:0; overflow:hidden; position:relative; min-height: 340px; }
    .heroMedia .mediaInner{ height:100%; display:flex; flex-direction:column; }
    .heroMedia img, .heroMedia video{
      width:100%;
      height:100%;
      object-fit: cover;
      display:block;
      flex: 1 1 auto;
      min-height: 340px;
      background:
        radial-gradient(700px 350px at 30% 10%, rgba(255,255,255,.8), rgba(255,255,255,0)),
        linear-gradient(135deg, rgba(255,79,163,.20), rgba(201,139,95,.18));
    }
    .mediaBadge{ position:absolute; left:14px; bottom:14px; display:flex; gap:10px; flex-wrap:wrap; }
    .badge{
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.85);
      border-radius: 999px;
      padding: 8px 10px;
      font-weight:900;
      font-size: 12px;
      color: #6b3a56;
    }

    /* sections */
    section{ padding: 18px 0; }
    .grid3{ display:grid; grid-template-columns: repeat(3, 1fr); gap:14px; }
    .mini{ padding:16px; }
    .mini h3{ margin:0 0 6px; font-size:16px; letter-spacing:-.2px; }
    .mini p{ margin:0; color:var(--muted); font-weight:700; line-height:1.45; }

    /* Story strip */
    .storyStrip{ display:grid; grid-template-columns: repeat(3, 1fr); gap:14px; }
    .storyCard{
      overflow:hidden;
      border-radius: var(--radius);
      border:1px solid rgba(255,255,255,.85);
      background: rgba(255,255,255,.72);
      box-shadow: var(--shadowSoft);
      position:relative;
      min-height: 220px;
    }
    .storyCard img, .storyCard video{
      width:100%; height: 220px;
      object-fit: cover;
      display:block;
      background:
        radial-gradient(650px 320px at 30% 10%, rgba(255,255,255,.75), rgba(255,255,255,0)),
        linear-gradient(135deg, rgba(255,79,163,.16), rgba(201,139,95,.14));
    }
    .storyCap{ padding: 12px 14px 14px; }
    .storyCap strong{ display:block; font-size:14px; }
    .storyCap span{ display:block; margin-top:4px; color:var(--muted); font-weight:700; font-size:13px; }

    /* Flow */
    .flow{ display:grid; grid-template-columns: 1fr; gap:14px; }
    .flowHead{ display:flex; align-items:flex-end; justify-content:space-between; gap:12px; padding: 0 4px; }
    .flowHead h2{ margin:0; font-size: 22px; letter-spacing:-.2px; }
    .flowHead p{ margin:0; color:var(--muted); font-weight:700; }
    .steps{ display:flex; gap:10px; flex-wrap:wrap; }
    .step{
      font-weight:900; font-size: 12px; color: var(--muted);
      padding: 8px 10px; border-radius: 999px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(255,255,255,.80);
    }
    .step.active{
      color:#fff;
      background: linear-gradient(135deg, var(--pink), var(--pink2));
      border-color: rgba(255,255,255,.15);
      box-shadow: 0 14px 26px rgba(255,79,163,.22);
    }

    .panel{ display:none; padding:18px; }
    .panel.active{ display:block; }

    .formRow{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    label.lbl{ display:block; font-weight:900; margin: 10px 0 8px; }
    input, textarea, select{
      width:100%;
      font: inherit;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(11,27,42,.10);
      background: rgba(255,255,255,.85);
      outline: none;
      box-shadow: 0 10px 18px rgba(0,0,0,.06);
    }
    textarea{ min-height: 120px; resize: vertical; }
    .hint{ margin: 8px 0 0; color: var(--muted); font-weight:700; font-size: 13px; line-height:1.4; }

    /* Pack tiles */
    .pack-tiles{ display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; margin-top: 10px; }
    .packTile{
      text-align:left; padding:14px;
      border-radius: 18px;
      border: 1px solid rgba(255,79,163,.18);
      background: rgba(255,255,255,.70);
      box-shadow: var(--shadowSoft);
      cursor:pointer;
      transition:.15s;
      position:relative;
      overflow:hidden;
      user-select:none;
    }
    .packTile:hover{ transform: translateY(-1px); }
    .packTile.active{
      border-color: rgba(255,79,163,.42);
      box-shadow: 0 18px 34px rgba(255,79,163,.18);
      background:
        radial-gradient(500px 260px at 20% 0%, rgba(255,255,255,.85), rgba(255,255,255,0)),
        linear-gradient(135deg, rgba(255,79,163,.16), rgba(255,124,197,.10)),
        rgba(255,255,255,.70);
    }
    .packTile .t{ display:flex; align-items:center; justify-content:space-between; gap:10px; font-weight:1000; }
    .packTile .t b{ font-size:16px; }
    .packTile .t em{
      font-style:normal; font-size:12px;
      padding:6px 10px; border-radius:999px;
      background: rgba(255,79,163,.12);
      border: 1px solid rgba(255,79,163,.18);
      color: #7a2a54; font-weight:1000;
      white-space:nowrap;
    }
    .packTile .d{ margin-top:8px; color:var(--muted); font-weight:800; font-size:13px; line-height:1.35; }
    .packTile .k{ margin-top:10px; display:flex; gap:8px; flex-wrap:wrap; }
    .tag{
      font-size:12px; font-weight:900; color: #6b3a56;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.85);
      padding:6px 10px; border-radius: 999px;
    }

    /* Cookie play */
    .cookiePlay{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; margin-top: 12px; align-items:stretch; }
    .cookieStage{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.85);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadowSoft);
      padding: 14px;
      position:relative;
      overflow:hidden;
      min-height: 260px;
    }
    .cookieCanvas{
      width:100%;
      height: 230px;
      border-radius: 18px;
      background:
        radial-gradient(180px 180px at 50% 52%, rgba(201,139,95,.22), rgba(201,139,95,0) 65%),
        radial-gradient(260px 240px at 45% 40%, rgba(255,255,255,.80), rgba(255,255,255,0) 62%),
        linear-gradient(135deg, rgba(255,79,163,.12), rgba(255,124,197,.10)),
        rgba(255,255,255,.65);
      display:flex;
      align-items:center;
      justify-content:center;
      position:relative;
      overflow:hidden;
    }
    .cookieDisc{
      width: 150px; height:150px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 35% 30%, rgba(255,255,255,.75), rgba(255,255,255,0) 60%),
        linear-gradient(135deg, var(--cookie2), var(--cookie));
      box-shadow: 0 18px 34px rgba(201,139,95,.25);
      position:relative;
    }
    .cookieDisc:after{
      content:"";
      position:absolute; inset:26px 26px auto auto;
      width:10px; height:10px; border-radius:99px;
      background: rgba(120,60,20,.25);
      box-shadow:
        -34px 16px 0 rgba(120,60,20,.18),
        -18px 40px 0 rgba(120,60,20,.20),
        -46px 62px 0 rgba(120,60,20,.16),
        -70px 40px 0 rgba(120,60,20,.14);
    }
    .sprinkles{ position:absolute; inset:0; pointer-events:none; }
    .spr{
      position:absolute;
      width:10px; height:4px;
      border-radius: 99px;
      background: rgba(255,79,163,.65);
      transform: rotate(18deg);
      opacity: .0;
      transition: opacity .2s;
    }
    .cookieStage.playing .spr{ opacity:1; }

    .cookieControls{
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,.85);
      background: rgba(255,255,255,.65);
      box-shadow: var(--shadowSoft);
      padding: 14px;
    }
    .ctrlRow{ display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px; }
    .smallBtn{
      border: 1px solid rgba(255,79,163,.22);
      background: rgba(255,79,163,.10);
      color: #7a2a54;
      font-weight:1000;
      padding: 10px 12px;
      border-radius: 16px;
      cursor:pointer;
      transition:.15s;
    }
    .smallBtn:hover{ transform: translateY(-1px); background: rgba(255,79,163,.14); }

    .panelNav{
      display:flex;
      justify-content:space-between;
      gap:12px;
      margin-top: 14px;
      flex-wrap:wrap;
    }

    /* FAQ */
    .faqGrid{ display:grid; grid-template-columns: 1fr 1fr; gap:14px; }
    details{
      border-radius: var(--radius);
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.85);
      box-shadow: var(--shadowSoft);
      padding: 12px 14px;
    }
    summary{ font-weight:1000; cursor:pointer; list-style:none; }
    summary::-webkit-details-marker{ display:none; }
    details p{ margin: 10px 0 0; color: var(--muted); font-weight:700; line-height:1.45; }

    footer{ padding: 28px 0 50px; color: var(--muted); }
    .footGrid{ display:grid; grid-template-columns: 1.2fr .8fr; gap:14px; align-items:start; }
    .footCard{ padding:16px; }
    .footLinks{ display:flex; flex-wrap:wrap; gap:10px; margin-top: 10px; }
    .footLinks a{
      text-decoration:none;
      padding:10px 12px;
      border-radius: 16px;
      background: rgba(255,255,255,.65);
      border: 1px solid rgba(255,255,255,.85);
      font-weight:900;
    }

    /* Cookie consent */
    .consent{ position:fixed; left:14px; right:14px; bottom:14px; z-index:50; display:none; }
    .consent.show{ display:block; }
    .consentBox{
      width:min(820px, 100%);
      margin:0 auto;
      border-radius: 24px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(255,255,255,.9);
      box-shadow: 0 24px 70px rgba(0,0,0,.18);
      padding: 14px;
      backdrop-filter: blur(10px);
    }
    .consentGrid{ display:grid; grid-template-columns: 1fr auto; gap:12px; align-items:center; }
    .consentTitle{ font-weight:1000; margin:0; }
    .consentText{
      margin:6px 0 0;
      color: var(--muted);
      font-weight:700;
      line-height:1.35;
      font-size: 13px;
    }
    .consentActions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
    .linkSoft{
      font-weight:1000;
      color:#7a2a54;
      text-decoration:none;
      border-bottom: 2px dotted rgba(255,79,163,.45);
    }

    /* Hero fx canvas */
    #heroFx{ position:absolute; inset:0; pointer-events:none; z-index:2; }

    /* ===== Cookie Cursor (DOM follower) ===== */
    .cookieCursor{
      position: fixed;
      left: 0; top: 0;
      width: 34px; height: 34px;
      border-radius: 999px;
      pointer-events: none;
      z-index: 9999;
      transform: translate(-50%,-50%) scale(0.0);
      transition: transform 260ms ease, opacity 260ms ease;
      opacity: 0;
      background:
        radial-gradient(circle at 35% 30%, rgba(255,255,255,.80), rgba(255,255,255,0) 60%),
        linear-gradient(135deg, var(--cookie2), var(--cookie));
      box-shadow: 0 16px 26px rgba(201,139,95,.25);
      will-change: transform,left,top;
    }
    .cookieCursor:after{
      content:"";
      position:absolute; inset:10px 10px auto auto;
      width:7px; height:7px; border-radius:99px;
      background: rgba(120,60,20,.22);
      box-shadow:
        -14px 6px 0 rgba(120,60,20,.20),
        -8px 14px 0 rgba(120,60,20,.16),
        -18px 18px 0 rgba(120,60,20,.18);
    }
    body.cursorOn *{ cursor: none !important; }
    body.cursorOn .cookieCursor{
      opacity: 1;
      transform: translate(-50%,-50%) scale(1);
    }
    @media (pointer: coarse){
      body.cursorOn *{ cursor: auto !important; }
      .cookieCursor{ display:none !important; }
    }

    /* ===== Click Intro Overlay: roll -> bite -> QR ===== */
    .introOverlay{
      position: fixed; inset: 0;
      z-index: 9998;
      pointer-events: none;
      display: none;
      align-items: center;
      justify-content: center;
      background: rgba(255,255,255,.45);
      backdrop-filter: blur(6px);
    }
    .introOverlay.show{ display:flex; }
    .introStage{
      width: min(520px, calc(100% - 40px));
      height: 220px;
      border-radius: 26px;
      border: 1px solid rgba(255,255,255,.85);
      background: rgba(255,255,255,.70);
      box-shadow: 0 26px 90px rgba(0,0,0,.20);
      position: relative;
      overflow: hidden;
    }
    .introCookie{
      position: absolute;
      left: -120px;
      top: 50%;
      width: 92px; height: 92px;
      margin-top: -46px;
      border-radius: 999px;
      background:
        radial-gradient(circle at 35% 30%, rgba(255,255,255,.80), rgba(255,255,255,0) 60%),
        linear-gradient(135deg, var(--cookie2), var(--cookie));
      box-shadow: 0 20px 40px rgba(201,139,95,.28);
      transform: rotate(0deg);
    }
    .introCookie:after{
      content:"";
      position:absolute; inset:18px 18px auto auto;
      width:10px; height:10px; border-radius:99px;
      background: rgba(120,60,20,.22);
      box-shadow:
        -22px 10px 0 rgba(120,60,20,.18),
        -12px 26px 0 rgba(120,60,20,.20),
        -28px 38px 0 rgba(120,60,20,.16);
    }
    .biteMask{
      position:absolute;
      right: 8px; top: 10px;
      width: 44px; height: 44px;
      border-radius: 999px;
      background: rgba(255,255,255,.85);
      transform: scale(0);
      transform-origin: center;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.65);
    }
    .introQR{
      position:absolute;
      right: 18px; bottom: 18px;
      width: 72px; height: 72px;
      border-radius: 16px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(11,27,42,.10);
      display:flex; align-items:center; justify-content:center;
      opacity: 0;
      transform: translateY(10px) scale(.96);
      box-shadow: 0 18px 40px rgba(0,0,0,.12);
    }
    .introText{
      position:absolute;
      left: 18px; bottom: 18px;
      font-weight: 1000;
      color: #6b3a56;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255,255,255,.85);
      padding: 10px 12px;
      border-radius: 999px;
      box-shadow: 0 14px 28px rgba(0,0,0,.10);
    }

    @keyframes rollIn {
      0%   { left:-120px; transform: rotate(0deg); }
      70%  { left: 300px; transform: rotate(520deg); }
      100% { left: 310px; transform: rotate(580deg); }
    }
    @keyframes bitePop {
      0% { transform: scale(0); }
      60%{ transform: scale(1.0); }
      100%{ transform: scale(0.0); }
    }
    @keyframes qrShow {
      0% { opacity:0; transform: translateY(10px) scale(.96); }
      100% { opacity:1; transform: translateY(0) scale(1); }
    }

    @media (prefers-reduced-motion: reduce){
      #heroFx{ display:none !important; }
      .introOverlay{ display:none !important; }
      body.cursorOn *{ cursor:auto !important; }
      .cookieCursor{ display:none !important; }
    }

    /* Mobile */
    @media (max-width: 920px){
      .heroGrid{ grid-template-columns: 1fr; }
      .heroMedia img,.heroMedia video{ min-height: 260px; }
      .trustBar{ grid-template-columns: 1fr 1fr; }
      .grid3{ grid-template-columns: 1fr; }
      .storyStrip{ grid-template-columns: 1fr; }
      .faqGrid{ grid-template-columns: 1fr; }
      .footGrid{ grid-template-columns: 1fr; }
      .cookiePlay{ grid-template-columns: 1fr; }
      .formRow{ grid-template-columns: 1fr; }

      .consentText{ display:none; }
      .consentGrid{ grid-template-columns: 1fr; }
      .consentActions{ justify-content:stretch; }
      .consentActions .btn{ width:100%; }

      @keyframes rollIn {
        0%   { left:-120px; transform: rotate(0deg); }
        70%  { left: 220px; transform: rotate(520deg); }
        100% { left: 230px; transform: rotate(580deg); }
      }
    }
  </style>
</head>

<body>
  <!-- Cursor -->
  <div class="cookieCursor" id="cookieCursor" aria-hidden="true"></div>

  <!-- Click Intro Overlay -->
  <div class="introOverlay" id="introOverlay" aria-hidden="true">
    <div class="introStage">
      <div class="introCookie" id="introCookie">
        <div class="biteMask" id="biteMask"></div>
      </div>

      <div class="introQR" id="introQR">
        <!-- simple QR icon (svg) -->
        <svg viewBox="0 0 24 24" width="44" height="44" fill="none" stroke="currentColor" stroke-width="2" opacity=".85">
          <path d="M3 3h7v7H3zM14 3h7v7h-7zM3 14h7v7H3z"/>
          <path d="M14 14h3v3h-3zM19 14h2v2h-2zM14 19h2v2h-2zM18 18h3v3h-3z"/>
        </svg>
      </div>
      <div class="introText">Keks rollt rein ‚Üí Biss ‚Üí QR ‚ú®</div>
    </div>
  </div>

  <header>
    <div class="wrap top">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div>OnlyKeks</div>
          <small>Post, die schmeckt</small>
        </div>
      </div>

      <nav class="nav" aria-label="Navigation">
        <a href="#flow">Gestalten</a>
        <a href="#faq">FAQ</a>
        <a href="#versand">Versand</a>
      </nav>

      <div class="ctaTop">
        <span class="pill">Kein Account</span>
        <a class="btn btnPrimary" href="#flow">Jetzt Keks gestalten</a>
      </div>
    </div>
  </header>

  <main>
    <section class="hero">
      <div class="wrap heroGrid">
        <div class="card heroText">
          <canvas id="heroFx"></canvas>

          <h1>Schick ‚Äône s√º√üe Botschaft ‚Äì und hol dir ‚Äône QR-Antwort zur√ºck.</h1>
          <p class="sub">Du schickst einen Keks mit Message + QR. Die Person scannt, antwortet ‚Äì und wir schicken den Reply-Keks direkt zur√ºck. Schnell, s√º√ü, ohne Stress.</p>

          <div class="chipRow" aria-label="Vorlagen">
            <button class="chip" type="button" data-msg="Ich vermiss dich.">Ich vermiss dich</button>
            <button class="chip" type="button" data-msg="Gl√ºckwunsch! üç™">Gl√ºckwunsch</button>
            <button class="chip" type="button" data-msg="Beweg dein Arsch. üòÑ">Beweg dein Arsch</button>
            <button class="chip" type="button" data-msg="Komm ran, wir m√ºssen reden.">Komm ran</button>
          </div>

          <div class="heroActions">
            <a class="btn btnPrimary" href="#flow">Keks gestalten</a>
            <a class="btn" href="#faq">Erst kurz checken</a>
            <span class="pill">Reply-Loop</span>
          </div>

          <div class="trustBar" role="group" aria-label="Trust">
            <div class="trustItem">
              <div class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7h18v10H3z"/><path d="M3 7l9 6 9-6"/></svg>
              </div>
              <div>Briefkasten-Lieferung</div>
            </div>
            <div class="trustItem">
              <div class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 1v22"/><path d="M5 6l7-5 7 5"/><path d="M5 18l7 5 7-5"/></svg>
              </div>
              <div>QR-Antwort in Minuten</div>
            </div>
            <div class="trustItem">
              <div class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
              </div>
              <div>Sicher bezahlen (Stripe)</div>
            </div>
            <div class="trustItem">
              <div class="ico" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a10 10 0 100 20 10 10 0 000-20z"/><path d="M8 12h8"/></svg>
              </div>
              <div>Allergene transparent</div>
            </div>
          </div>
        </div>

        <div class="card heroMedia" aria-label="Hero Bild/Video">
          <div class="mediaInner">
            <video id="heroVideo" autoplay muted playsinline loop preload="metadata" poster="assets/img/hero.jpg">
              <source src="assets/video/hero.mp4" type="video/mp4">
            </video>
            <img id="heroImg" src="assets/img/hero.jpg" alt="H√§nde halten einen Keks, QR wird gescannt, Geschenk-Mood" loading="eager" decoding="async" style="display:none;" />
          </div>
          <div class="mediaBadge" aria-hidden="true">
            <span class="badge">Weiches Tageslicht</span>
            <span class="badge">Keks + Karte + Handy</span>
            <span class="badge">QR sichtbar</span>
          </div>
        </div>
      </div>
    </section>

    <section>
      <div class="wrap grid3">
        <div class="card mini">
          <h3>1) Du schickst den Keks</h3>
          <p>Message drauf, QR drauf, ab in den Briefkasten ‚Äì fertig.</p>
        </div>
        <div class="card mini">
          <h3>2) Scan & Antwort</h3>
          <p>Empf√§nger scannt den QR-Code und tippt eine Antwort ‚Äì ohne Login.</p>
        </div>
        <div class="card mini">
          <h3>3) Reply-Keks zur√ºck</h3>
          <p>Wir backen den Reply-Keks mit der Antwort und schicken ihn zur√ºck zu dir.</p>
        </div>
      </div>
    </section>

    <section>
      <div class="wrap storyStrip" aria-label="Story Bilder">
        <article class="storyCard">
          <img src="assets/img/story-1.jpg" alt="Keks + Karte in der Hand, pinker Himmel" loading="lazy" decoding="async" />
          <div class="storyCap">
            <strong>Geschenk-Moment</strong>
            <span>Sieht aus wie Deko ‚Äì f√ºhlt sich an wie ‚Äûich denk an dich‚Äú.</span>
          </div>
        </article>

        <article class="storyCard">
          <video id="storyVideo2" muted playsinline loop preload="metadata" poster="assets/img/story-2.jpg">
            <source src="assets/video/story-2.mp4" type="video/mp4">
          </video>
          <div class="storyCap">
            <strong>QR-Scan</strong>
            <span>Handy drauf, zack ‚Äì Antwort schreiben, fertig.</span>
          </div>
        </article>

        <article class="storyCard">
          <img src="assets/img/story-3.jpg" alt="Antwort kommt an, Keks wird ge√∂ffnet" loading="lazy" decoding="async" />
          <div class="storyCap">
            <strong>Reply-Loop</strong>
            <span>Du bekommst echte Post zur√ºck ‚Äì nur eben‚Ä¶ lecker.</span>
          </div>
        </article>
      </div>
    </section>

    <section id="flow">
      <div class="wrap flow">
        <div class="flowHead">
          <div>
            <h2>Jetzt gestalten</h2>
            <p>Ein Fokus. Ein Flow. Eine s√º√üe Mission.</p>
          </div>
          <div class="steps" aria-label="Schritte">
            <span class="step active" data-step="1">1 Message</span>
            <span class="step" data-step="2">2 Veredeln</span>
            <span class="step" data-step="3">3 Extras</span>
            <span class="step" data-step="4">4 Adresse</span>
            <span class="step" data-step="5">5 Bezahlen</span>
          </div>
        </div>

        <div class="card">
          <div class="panel active" id="p1">
            <h3 style="margin:0 0 6px;">1) Message schreiben</h3>
            <p class="hint" style="margin-top:0;">Kurz, sweet, ehrlich. Bis 500 Zeichen.</p>

            <label class="lbl" for="msg">Deine Message</label>
            <textarea id="msg" maxlength="500" placeholder="z.B. ‚ÄûIch denk an dich. Scan das Ding. üòÑ‚Äú"></textarea>
            <div class="hint"><span id="count">0</span>/500 Zeichen</div>

            <label class="lbl" for="pack">Paket</label>
            <select id="pack" name="pack">
              <option value="Quick">Quick</option>
              <option value="Custom" selected>Custom</option>
              <option value="Premium">Premium</option>
            </select>

            <div class="pack-tiles" id="packTiles" role="radiogroup" aria-label="Paket w√§hlen">
              <button class="packTile" type="button" data-pack="Quick" role="radio" aria-checked="false">
                <div class="t"><b>Quick</b><em>easy</em></div>
                <div class="d">Standard-Deko, schnell raus. Perfekt f√ºr ‚Äûkurz mal lieb‚Äú.</div>
                <div class="k">
                  <span class="tag">1 Keks</span><span class="tag">QR-Reply</span><span class="tag">Basic</span>
                </div>
              </button>
              <button class="packTile active" type="button" data-pack="Custom" role="radio" aria-checked="true">
                <div class="t"><b>Custom</b><em>sweet spot</em></div>
                <div class="d">Mehr Deko, mehr ‚Äûwow‚Äú. Genau die Deko-Frau-Zone.</div>
                <div class="k">
                  <span class="tag">1 Keks</span><span class="tag">Mehr Deko</span><span class="tag">QR-Reply</span>
                </div>
              </button>
              <button class="packTile" type="button" data-pack="Premium" role="radio" aria-checked="false">
                <div class="t"><b>Premium</b><em>box</em></div>
                <div class="d">Edle Box + Upgrade-Feeling. F√ºr Geburtstag, Liebe, Drama.</div>
                <div class="k">
                  <span class="tag">Box</span><span class="tag">Wow-Optik</span><span class="tag">QR-Reply</span>
                </div>
              </button>
            </div>

            <div class="panelNav">
              <span></span>
              <button class="btn btnPrimary" type="button" data-next="2">Weiter</button>
            </div>
          </div>

          <div class="panel" id="p2">
            <h3 style="margin:0 0 6px;">2) Keks veredeln</h3>
            <p class="hint" style="margin-top:0;">Hier ist der ‚ÄûSpiel-Faktor‚Äú: rumklicken, ausprobieren, h√ºbsch machen.</p>

            <div class="cookiePlay">
              <div class="cookieStage" id="cookieStage">
                <div class="cookieCanvas" aria-label="Keks Vorschau">
                  <div class="cookieDisc" aria-hidden="true"></div>
                  <div class="sprinkles" id="sprinkles" aria-hidden="true"></div>
                </div>
                <p class="hint">Tipp: ‚ÄûStreusel an‚Äú macht direkt Geschenk-Mood.</p>
              </div>

              <div class="cookieControls">
                <label class="lbl" for="theme">Stil</label>
                <select id="theme">
                  <option value="classic" selected>Klassisch (Vanille)</option>
                  <option value="pink">Pink-Sprinkle</option>
                  <option value="choco">Schoko-Mood</option>
                </select>

                <div class="ctrlRow">
                  <button class="smallBtn" type="button" data-action="sprinkle">Streusel an/aus</button>
                  <button class="smallBtn" type="button" data-action="random">Random Deko</button>
                  <button class="smallBtn" type="button" data-action="reset">Reset</button>
                </div>

                <p class="hint" style="margin-top:12px;">
                  Sp√§ter ausbaubar: Sticker, Icing-Schrift, Undo/Redo, ‚ÄûEntdecken‚Äú-Randomizer.
                </p>
              </div>
            </div>

            <div class="panelNav">
              <button class="btn" type="button" data-prev="1">Zur√ºck</button>
              <button class="btn btnPrimary" type="button" data-next="3">Weiter</button>
            </div>
          </div>

          <div class="panel" id="p3">
            <h3 style="margin:0 0 6px;">3) Extras</h3>
            <p class="hint" style="margin-top:0;">Optional. Kein Overkill. Nur das, was wirklich kickt.</p>

            <div class="grid3">
              <div class="card mini">
                <h3>Foto-Upload (optional)</h3>
                <p>Ein Bild f√ºr die Mini-Story-Seite (wenn du willst).</p>
                <label class="lbl" for="photo">Foto</label>
                <input id="photo" type="file" accept="image/*" />
              </div>
              <div class="card mini">
                <h3>Handschrift-Look</h3>
                <p>Wir setzen deine Message in ‚Äûs√º√ü‚Äú statt ‚ÄûTech‚Äú.</p>
                <label class="lbl" for="hand">Look</label>
                <select id="hand">
                  <option value="soft" selected>Soft (empfohlen)</option>
                  <option value="bold">Bold</option>
                  <option value="cute">Cute</option>
                </select>
              </div>
              <div class="card mini">
                <h3>Mini-Trigger</h3>
                <p>Ein kleiner Zusatz-Spruch als ‚ÄûKick‚Äú.</p>
                <label class="lbl" for="trigger">Trigger</label>
                <select id="trigger">
                  <option value="">Keiner</option>
                  <option value="move">Beweg dein Arsch üòÑ</option>
                  <option value="work">Geh arbeiten üôÉ</option>
                  <option value="party">Party machen ü•≥</option>
                </select>
              </div>
            </div>

            <div class="panelNav">
              <button class="btn" type="button" data-prev="2">Zur√ºck</button>
              <button class="btn btnPrimary" type="button" data-next="4">Weiter</button>
            </div>
          </div>

          <div class="panel" id="p4">
            <h3 style="margin:0 0 6px;">4) Adresse</h3>
            <p class="hint" style="margin-top:0;">Sauber, klar, damit die Post nicht rumzickt.</p>

            <div class="formRow">
              <div>
                <label class="lbl" for="toName">Empf√§nger Name</label>
                <input id="toName" placeholder="z.B. Lena" />
              </div>
              <div>
                <label class="lbl" for="fromName">Dein Name (f√ºr Reply)</label>
                <input id="fromName" placeholder="z.B. Schmidti" />
              </div>
            </div>

            <label class="lbl" for="toStreet">Stra√üe & Hausnummer</label>
            <input id="toStreet" placeholder="Musterstra√üe 12" />

            <div class="formRow">
              <div>
                <label class="lbl" for="toZip">PLZ</label>
                <input id="toZip" inputmode="numeric" placeholder="10115" />
              </div>
              <div>
                <label class="lbl" for="toCity">Ort</label>
                <input id="toCity" placeholder="Berlin" />
              </div>
            </div>

            <div class="panelNav">
              <button class="btn" type="button" data-prev="3">Zur√ºck</button>
              <button class="btn btnPrimary" type="button" data-next="5">Weiter</button>
            </div>
          </div>

          <div class="panel" id="p5">
            <h3 style="margin:0 0 6px;">5) Bezahlen</h3>
            <p class="hint" style="margin-top:0;">Du wirst zu Stripe weitergeleitet. Wir speichern nur das N√∂tigste f√ºr deinen Keks-Entwurf.</p>

            <div class="grid3">
              <div class="card mini">
                <h3>Dein Entwurf</h3>
                <p class="hint" id="summary" style="margin:8px 0 0;">‚Äî</p>
              </div>
              <div class="card mini">
                <h3>Reply-Code</h3>
                <p class="hint" id="replyCode" style="margin:8px 0 0;">‚Äî</p>
              </div>
              <div class="card mini">
                <h3>Bezahlen</h3>
                <p>Ein Klick ‚Äì dann ist das Ding raus.</p>
                <a class="btn btnPrimary" id="payBtn" href="#" target="_blank" rel="noopener">Weiter zu Stripe</a>
                <p class="hint">Hinweis: F√ºr den MVP ist das ein Payment-Link. Sp√§ter Checkout-Session + Webhook.</p>
              </div>
            </div>

            <div class="panelNav">
              <button class="btn" type="button" data-prev="4">Zur√ºck</button>
              <a class="btn" href="#versand">Versand/Allergene</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="faq">
      <div class="wrap">
        <h2 style="margin:0 0 12px;">FAQ</h2>
        <div class="faqGrid">
          <details>
            <summary>Wie schnell kommt die QR-Antwort?</summary>
            <p>Die Antwort ist digital sofort nach Scan m√∂glich. Der Reply-Keks ist dann physisch per Versand unterwegs.</p>
          </details>
          <details>
            <summary>Muss die Person einen Account erstellen?</summary>
            <p>Nein. QR scannen, Text tippen, abschicken. Fertig.</p>
          </details>
          <details>
            <summary>Was speichert ihr?</summary>
            <p>Notwendig: deinen Keks-Entwurf (damit du nicht alles neu tippen musst). Optional: anonyme Nutzungsdaten, um zu verstehen, welche Kekse gefallen. Wir verkaufen keine Daten.</p>
          </details>
          <details>
            <summary>Allergene?</summary>
            <p>Im Bereich ‚ÄûAllergene‚Äú findest du die Angaben. Wenn du besondere Anforderungen hast, schreib uns.</p>
          </details>
        </div>
      </div>
    </section>

    <section id="versand">
      <div class="wrap">
        <div class="card mini">
          <h3 style="margin:0 0 6px;">Versand & Allergene</h3>
          <p class="hint" style="margin-top:0;">
            Versand per Briefkasten-tauglicher Sendung. Allergene werden transparent ausgewiesen (Platzhalter im MVP).
          </p>
        </div>
      </div>
    </section>

    <footer>
      <div class="wrap footGrid">
        <div class="card footCard">
          <div style="font-weight:1000;">OnlyKeks</div>
          <p class="hint" style="margin:8px 0 0;">Geschenk-Mood statt Tech-Kram. Ein Keks, eine Message, ein Reply-Loop.</p>
          <div class="footLinks">
            <a href="#impressum">Impressum</a>
            <a href="#datenschutz">Wie wir mit Daten umgehen</a>
            <a href="#agb">AGB</a>
            <a href="#allergene">Allergene</a>
          </div>
        </div>

        <div class="card footCard">
          <div style="font-weight:1000;">Kontakt</div>
          <p class="hint" style="margin:8px 0 0;">MVP: Kontaktangaben hier erg√§nzen.</p>
        </div>
      </div>

      <div class="wrap" style="margin-top:14px;">
        <div class="card mini" id="impressum">
          <h3 style="margin:0 0 6px;">Impressum</h3>
          <p class="hint" style="margin-top:0;">Platzhalter ‚Äì hier deine Daten rein.</p>
        </div>

        <div class="card mini" id="datenschutz" style="margin-top:14px;">
          <h3 style="margin:0 0 6px;">Wie wir mit Daten umgehen</h3>
          <p class="hint" style="margin-top:0;">
            Notwendig: Entwurf speichern (damit du nicht neu anfangen musst). Optional: anonyme Analyse, um zu verstehen, was gut ankommt.
            Wir verkaufen keine Daten.
          </p>
        </div>

        <div class="card mini" id="agb" style="margin-top:14px;">
          <h3 style="margin:0 0 6px;">AGB</h3>
          <p class="hint" style="margin-top:0;">Platzhalter ‚Äì sp√§ter ausformulieren.</p>
        </div>

        <div class="card mini" id="allergene" style="margin-top:14px;">
          <h3 style="margin:0 0 6px;">Allergene</h3>
          <p class="hint" style="margin-top:0;">Platzhalter ‚Äì Zutaten/Allergene hier ausweisen.</p>
        </div>
      </div>
    </footer>
  </main>

  <div class="consent" id="consent">
    <div class="consentBox">
      <div class="consentGrid">
        <div>
          <p class="consentTitle">Kurzer Keks-Hinweis üç™</p>
          <p class="consentText">
            Wir nutzen <b>notwendige Cookies</b>, damit dein Keks-Entwurf gespeichert bleibt. Optional helfen uns anonyme Daten zu verstehen, welche Kekse gefallen.
            <a class="linkSoft" href="#datenschutz">Wie wir mit Daten umgehen</a>.
          </p>
        </div>
        <div class="consentActions">
          <button class="btn btnPrimary" id="consentAll" type="button">Alles klar üç™</button>
          <button class="btn" id="consentNeed" type="button">Nur das N√∂tigste</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    /*** CONFIG: NUR HIER STRIPE EINTRAGEN ***/
    const STRIPE_PAYMENT_LINK = "https://buy.stripe.com/aBcDeFgHiJkLmNoPqR";

    /**
     * OPTIONAL: Base Path Fix, falls du doch mal aus einem Unterordner l√§dst.
     * Normal f√ºr GH Pages Project Site passt "assets/..." bereits.
     */
    const BASE = ""; // z.B. "/keksms" oder "" lassen

    const A = (p) => (BASE ? (BASE.replace(/\/$/,"") + "/" + p.replace(/^\//,"")) : p);

    /* =======================
       ELEMENTS (sauber)
    ======================= */
    const msg       = document.getElementById("msg");
    const count     = document.getElementById("count");
    const packSel   = document.getElementById("pack");
    const packTiles = document.getElementById("packTiles");
    const steps     = document.querySelectorAll(".step");

    const panels = {
      1: document.getElementById("p1"),
      2: document.getElementById("p2"),
      3: document.getElementById("p3"),
      4: document.getElementById("p4"),
      5: document.getElementById("p5"),
    };

    const heroVideo = document.getElementById("heroVideo");
    const heroImg   = document.getElementById("heroImg");
    const storyVideo2 = document.getElementById("storyVideo2");

    const cookieStage = document.getElementById("cookieStage");
    const sprinkles   = document.getElementById("sprinkles");
    const themeSel    = document.getElementById("theme");

    const summaryEl   = document.getElementById("summary");
    const replyEl     = document.getElementById("replyCode");
    const payBtn      = document.getElementById("payBtn");

    /* =======================
       HARDENED MEDIA PATHS
       (damit "assets/..." wirklich gezogen wird)
    ======================= */
    // Set sources explicitly (hilft wenn Browser cached komisch / base tag etc.)
    heroVideo.querySelector("source").src = A("assets/video/hero.mp4");
    heroVideo.poster = A("assets/img/hero.jpg");
    heroImg.src = A("assets/img/hero.jpg");

    if(storyVideo2){
      storyVideo2.querySelector("source").src = A("assets/video/story-2.mp4");
      storyVideo2.poster = A("assets/img/story-2.jpg");
    }

    // update story imgs
    document.querySelectorAll('img[src^="assets/"]').forEach(img => {
      img.src = A(img.getAttribute("src"));
    });

    /* =======================
       HERO VIDEO FALLBACK
    ======================= */
    (function heroFallback(){
      const showImg = ()=>{
        heroVideo.style.display="none";
        heroImg.style.display="block";
      };

      heroVideo.addEventListener("error", showImg);
      heroVideo.addEventListener("stalled", showImg);

      // Autoplay kann blocken -> fallback
      setTimeout(()=>{
        const playing = !!(heroVideo.currentTime > 0 && !heroVideo.paused && !heroVideo.ended);
        if(!playing) showImg();
      }, 900);
    })();

    // story video fallback -> poster img remains anyway, but if file missing, stop it
    (function storyFallback(){
      if(!storyVideo2) return;
      storyVideo2.addEventListener("error", ()=>{
        storyVideo2.style.display = "none";
        // optional: swap in an img
        const host = storyVideo2.parentElement;
        const img = document.createElement("img");
        img.src = A("assets/img/story-2.jpg");
        img.alt = "QR-Scan ‚Äì Handy scannt den QR-Code";
        img.loading = "lazy";
        img.decoding = "async";
        host.insertBefore(img, host.firstChild);
      });
    })();

    /* =======================
       CHIP TEMPLATES
    ======================= */
    document.querySelectorAll(".chip").forEach(ch=>{
      ch.addEventListener("click", ()=>{
        msg.value = ch.dataset.msg;
        msg.dispatchEvent(new Event("input"));
        document.getElementById("flow").scrollIntoView({behavior:"smooth", block:"start"});
      });
    });

    /* =======================
       COUNTER + SAVE (necessary storage)
    ======================= */
    function collectDraft(){
      return {
        msg: msg.value || "",
        pack: packSel.value || "Custom",
        theme: themeSel?.value || "classic",
        hand: document.getElementById("hand")?.value || "soft",
        trigger: document.getElementById("trigger")?.value || "",
        toName: document.getElementById("toName")?.value || "",
        fromName: document.getElementById("fromName")?.value || "",
        toStreet: document.getElementById("toStreet")?.value || "",
        toZip: document.getElementById("toZip")?.value || "",
        toCity: document.getElementById("toCity")?.value || "",
        sprinklesOn: cookieStage.classList.contains("playing")
      };
    }
    function saveDraft(){
      try{ localStorage.setItem("ok_draft", JSON.stringify(collectDraft())); }catch(e){}
    }

    msg.addEventListener("input", ()=>{
      count.textContent = String(msg.value.length);
      saveDraft();
    });

    /* =======================
       PACK TILES -> SELECT
    ======================= */
    function setActivePack(pack){
      packSel.value = pack;

      document.querySelectorAll(".packTile").forEach(t=>{
        const on = t.dataset.pack === pack;
        t.classList.toggle("active", on);
        t.setAttribute("aria-checked", on ? "true" : "false");
      });
      saveDraft();
    }
    packTiles.querySelectorAll(".packTile").forEach(tile=>{
      tile.addEventListener("click", ()=> setActivePack(tile.dataset.pack));
    });
    packSel.addEventListener("change", ()=> setActivePack(packSel.value));

    /* =======================
       FLOW NAV
    ======================= */
    function go(n){
      Object.values(panels).forEach(p=>p.classList.remove("active"));
      panels[n].classList.add("active");
      steps.forEach(s=> s.classList.toggle("active", +s.dataset.step === n));

      if(n === 5){
        payBtn.href = STRIPE_PAYMENT_LINK;
        const draft = collectDraft();
        const code  = getOrCreateReplyCode();
        replyEl.textContent = code;
        summaryEl.textContent =
          `Paket: ${draft.pack} ‚Ä¢ Message: ‚Äû${(draft.msg || "").slice(0, 90)}${(draft.msg||"").length>90?"‚Ä¶":""}‚Äú ‚Ä¢ Stil: ${draft.theme} ‚Ä¢ Trigger: ${draft.trigger || "‚Äî"}`;
      }

      saveDraft();
      document.getElementById("flow").scrollIntoView({behavior:"smooth", block:"start"});
    }

    document.querySelectorAll("[data-next]").forEach(b=>{
      b.addEventListener("click", ()=> go(+b.dataset.next));
    });
    document.querySelectorAll("[data-prev]").forEach(b=>{
      b.addEventListener("click", ()=> go(+b.dataset.prev));
    });

    /* =======================
       COOKIE PLAY
    ======================= */
    function seedSprinkles(){
      sprinkles.innerHTML = "";
      const n = 18;
      for(let i=0;i<n;i++){
        const el = document.createElement("div");
        el.className = "spr";
        el.style.left = (10 + Math.random()*80) + "%";
        el.style.top  = (12 + Math.random()*72) + "%";
        el.style.transform = `rotate(${Math.random()*180}deg)`;
        el.style.opacity = "0";
        sprinkles.appendChild(el);
      }
    }
    function toggleSprinkles(){
      cookieStage.classList.toggle("playing");
      const on = cookieStage.classList.contains("playing");
      sprinkles.querySelectorAll(".spr").forEach((el, i)=>{
        setTimeout(()=> el.style.opacity = on ? "1" : "0", i*12);
      });
      saveDraft();
    }
    function randomize(){
      seedSprinkles();
      cookieStage.classList.add("playing");
      sprinkles.querySelectorAll(".spr").forEach((el, i)=>{
        setTimeout(()=> el.style.opacity = "1", i*10);
      });
      saveDraft();
    }
    function resetPlay(){
      cookieStage.classList.remove("playing");
      seedSprinkles();
      saveDraft();
    }

    document.querySelectorAll("[data-action]").forEach(b=>{
      b.addEventListener("click", ()=>{
        const a = b.dataset.action;
        if(a==="sprinkle") toggleSprinkles();
        if(a==="random") randomize();
        if(a==="reset") resetPlay();
      });
    });
    themeSel.addEventListener("change", saveDraft);

    /* =======================
       RESTORE
    ======================= */
    function restoreDraft(){
      try{
        const raw = localStorage.getItem("ok_draft");
        if(!raw) return;
        const d = JSON.parse(raw);

        if(d.msg){ msg.value = d.msg; }
        if(d.pack){ setActivePack(d.pack); }
        if(d.theme){ themeSel.value = d.theme; }

        const hand = document.getElementById("hand");
        const trig = document.getElementById("trigger");
        if(hand && d.hand){ hand.value = d.hand; }
        if(trig && d.trigger !== undefined){ trig.value = d.trigger; }

        ["toName","fromName","toStreet","toZip","toCity"].forEach(id=>{
          const el = document.getElementById(id);
          if(el && d[id]) el.value = d[id];
        });

        seedSprinkles();
        if(d.sprinklesOn){
          cookieStage.classList.add("playing");
          sprinkles.querySelectorAll(".spr").forEach(el=> el.style.opacity = "1");
        }

        msg.dispatchEvent(new Event("input"));
      }catch(e){}
    }

    /* =======================
       REPLY CODE
    ======================= */
    function getOrCreateReplyCode(){
      let code = "";
      try{ code = localStorage.getItem("ok_reply_code") || ""; }catch(e){}
      if(code) return code;
      code = "OK-" + Math.random().toString(36).slice(2, 6).toUpperCase() + "-" + Date.now().toString(36).toUpperCase();
      try{ localStorage.setItem("ok_reply_code", code); }catch(e){}
      return code;
    }

    /* =======================
       COOKIE CONSENT
    ======================= */
    const consent = document.getElementById("consent");
    const consentAll  = document.getElementById("consentAll");
    const consentNeed = document.getElementById("consentNeed");

    function showConsentIfNeeded(){
      try{
        const c = localStorage.getItem("ok_consent");
        if(!c){ consent.classList.add("show"); }
      }catch(e){
        consent.classList.add("show");
      }
    }
    function setConsent(mode){
      try{ localStorage.setItem("ok_consent", mode); }catch(e){}
      consent.classList.remove("show");
    }
    consentAll.addEventListener("click", ()=> setConsent("all"));
    consentNeed.addEventListener("click", ()=> setConsent("need"));

    /* =======================
       HERO INTRO CANVAS (first load once)
       - roundRect fallback
    ======================= */
    const INTRO_KEY = "ok_intro_played_v2";

    function isMobile(){ return window.matchMedia && window.matchMedia("(max-width: 920px)").matches; }
    function reduceMotion(){ return window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches; }

    function rr(ctx, x, y, w, h, r){
      // roundRect polyfill (simple)
      r = Math.min(r, w/2, h/2);
      ctx.beginPath();
      ctx.moveTo(x+r, y);
      ctx.arcTo(x+w, y, x+w, y+h, r);
      ctx.arcTo(x+w, y+h, x, y+h, r);
      ctx.arcTo(x, y+h, x, y, r);
      ctx.arcTo(x, y, x+w, y, r);
      ctx.closePath();
    }

    function playIntroOnce(){
      if(reduceMotion()) return;
      let played = false;
      try{ played = localStorage.getItem(INTRO_KEY) === "1"; }catch(e){}
      if(played) return;
      try{ localStorage.setItem(INTRO_KEY, "1"); }catch(e){}
      runCrumbRain({ subtle: isMobile() });
    }

    function runCrumbRain({subtle=false}={}){
      const canvas = document.getElementById("heroFx");
      const ctx = canvas.getContext("2d");
      const host = canvas.parentElement;

      function resize(){
        const r = host.getBoundingClientRect();
        canvas.width = Math.floor(r.width * devicePixelRatio);
        canvas.height = Math.floor(r.height * devicePixelRatio);
        canvas.style.width = r.width + "px";
        canvas.style.height = r.height + "px";
        ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
      }
      resize();
      window.addEventListener("resize", resize, {passive:true});

      const w = () => canvas.getBoundingClientRect().width;
      const h = () => canvas.getBoundingClientRect().height;

      const colors = [
        "rgba(255,79,163,.85)",
        "rgba(255,124,197,.85)",
        "rgba(201,139,95,.70)",
        "rgba(255,255,255,.85)"
      ];

      const N = subtle ? 26 : 70;
      const parts = Array.from({length:N}).map((_,i)=>({
        x: Math.random()*w(),
        y: -20 - Math.random()*140,
        vx: (Math.random()-.5) * (subtle? .4 : 1.1),
        vy: (subtle? 1.1 : 2.4) + Math.random()* (subtle? .8 : 1.8),
        s: (subtle? 2.2 : 3.4) + Math.random()* (subtle? 1.2 : 2.0),
        r: Math.random()*Math.PI,
        vr: (Math.random()-.5) * 0.08,
        c: colors[i % colors.length],
        life: 0
      }));

      const cookieCenter = { x: w()*0.62, y: h()*0.44, rad: subtle? 42 : 58 };
      let t0 = performance.now();
      const tStart = performance.now();

      function drawCookieGhost(alpha){
        ctx.save();
        ctx.globalAlpha = alpha;
        ctx.beginPath();
        ctx.arc(cookieCenter.x, cookieCenter.y, cookieCenter.rad, 0, Math.PI*2);
        ctx.fillStyle = "rgba(201,139,95,.10)";
        ctx.fill();
        ctx.restore();
      }

      function tick(now){
        const dt = Math.min(32, now - t0);
        t0 = now;

        ctx.clearRect(0,0,w(),h());

        const elapsed = now - tStart;
        const ghostA = elapsed < 900 ? (0.55 - (elapsed/900)*0.45) : 0;
        if(ghostA > 0) drawCookieGhost(ghostA);

        parts.forEach(p=>{
          p.life += dt;

          if(!subtle && p.life > 350 && p.life < 1100){
            const dx = cookieCenter.x - p.x;
            const dy = cookieCenter.y - p.y;
            const dist = Math.max(40, Math.sqrt(dx*dx + dy*dy));
            const pull = 0.10;
            p.vx += (dx/dist) * pull;
            p.vy += (dy/dist) * pull * 0.45;
          }

          p.x += p.vx;
          p.y += p.vy;
          p.r += p.vr;

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.r);
          ctx.fillStyle = p.c;
          rr(ctx, -p.s/2, -p.s/2, p.s, p.s*0.55, 3);
          ctx.fill();
          ctx.restore();
        });

        if(now - tStart < (subtle ? 1200 : 1800)){
          requestAnimationFrame(tick);
        }else{
          ctx.clearRect(0,0,w(),h());
          window.removeEventListener("resize", resize);
        }
      }

      requestAnimationFrame(tick);
    }

    /* =======================
       CLICK INTRO (roll -> bite -> QR) ON FIRST CLICK
    ======================= */
    const CLICK_KEY = "ok_click_intro_v1";
    const overlay = document.getElementById("introOverlay");
    const introCookie = document.getElementById("introCookie");
    const biteMask = document.getElementById("biteMask");
    const introQR = document.getElementById("introQR");

    function playClickIntroOnce(){
      if(reduceMotion()) return;
      let done = false;
      try{ done = localStorage.getItem(CLICK_KEY) === "1"; }catch(e){}
      if(done) return;

      const onFirst = ()=>{
        document.removeEventListener("pointerdown", onFirst, {capture:true});
        try{ localStorage.setItem(CLICK_KEY, "1"); }catch(e){}

        overlay.classList.add("show");

        // reset
        introCookie.style.animation = "none";
        biteMask.style.animation = "none";
        introQR.style.animation = "none";
        introQR.style.opacity = "0";

        // roll in
        requestAnimationFrame(()=>{
          introCookie.style.animation = "rollIn 900ms cubic-bezier(.2,.9,.2,1) forwards";
        });

        // bite (mask pops on cookie)
        setTimeout(()=>{
          biteMask.style.animation = "bitePop 520ms cubic-bezier(.2,.9,.2,1) forwards";
        }, 720);

        // QR appears
        setTimeout(()=>{
          introQR.style.animation = "qrShow 360ms ease forwards";
        }, 980);

        // hide overlay
        setTimeout(()=>{
          overlay.classList.remove("show");
        }, 1550);
      };

      // capture so it triggers even if they click a button
      document.addEventListener("pointerdown", onFirst, {capture:true, once:true});
    }

    /* =======================
       COOKIE CURSOR
    ======================= */
    const cursorEl = document.getElementById("cookieCursor");
    function enableCookieCursor(){
      if(reduceMotion()) return;
      // no cursor on touch devices anyway via CSS
      document.body.classList.add("cursorOn");
      let x = window.innerWidth/2, y = window.innerHeight/2;

      const move = (e)=>{
        x = e.clientX; y = e.clientY;
        cursorEl.style.left = x + "px";
        cursorEl.style.top  = y + "px";
      };
      window.addEventListener("mousemove", move, {passive:true});

      // click micro-pop
      window.addEventListener("mousedown", ()=>{
        cursorEl.style.transform = "translate(-50%,-50%) scale(1.08)";
        setTimeout(()=> cursorEl.style.transform = "translate(-50%,-50%) scale(1)", 120);
      }, {passive:true});
    }

    /* =======================
       INIT
    ======================= */
    seedSprinkles();
    restoreDraft();
    showConsentIfNeeded();

    // set initial pack UI
    setActivePack(packSel.value || "Custom");

    // intros
    playIntroOnce();
    playClickIntroOnce();

    // cursor
    enableCookieCursor();
  </script>
</body>
</html>
